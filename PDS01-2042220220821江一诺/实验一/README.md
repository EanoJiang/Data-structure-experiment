# 三维信号处理系统算法描述与流程

## 一、数据结构设计

### 1. 基本数据结构
- **节点结构(Node)**：
  - 三个浮点型坐标值：x, y, z
  - 双向指针：prev, next

- **信号链表(SignalList)**：
  - 虚拟头节点：dummyHead
  - 虚拟尾节点：dummyTail
  - 大小计数器：size

### 2. 设计特点
- 采用带虚拟头尾节点的双向链表结构
- 使用虚拟节点简化边界处理
- 节点存储三维坐标数据，适合表示空间信号

## 二、基本操作算法

### 1. 初始化算法(init)
```
算法：init(list)
输入：信号链表指针list
输出：无
步骤：
1. 为虚拟头节点和尾节点分配内存
2. 设置头节点的prev为NULL，next指向尾节点
3. 设置尾节点的prev指向头节点，next为NULL
4. 初始化链表大小为0
```

### 2. 插入节点算法(insert)
```
算法：insert(list, index, x, y, z)
输入：链表指针list，插入位置index，坐标值x,y,z
输出：无
步骤：
1. 检查索引是否合法，不合法则直接返回
2. 从虚拟头节点开始，找到第index个位置前面的节点prev
3. 创建新节点，赋值x,y,z坐标
4. 调整指针，完成双向链接：
   - 新节点的next指向prev的next
   - 新节点的prev指向prev
   - prev的next的prev指向新节点
   - prev的next指向新节点
5. 链表大小加1
```

### 3. 删除节点算法(removeAt)
```
算法：removeAt(list, index)
输入：链表指针list，删除位置index
输出：无
步骤：
1. 检查索引是否合法，不合法则直接返回
2. 找到第index个位置前面的节点prev
3. 获取要删除的节点toDelete
4. 调整指针，跳过要删除的节点：
   - prev的next指向toDelete的next
   - toDelete的next的prev指向prev
5. 释放被删除节点内存
6. 链表大小减1
```

## 三、信号处理算法

### 1. 均值滤波算法(smooth)
```
算法：smooth(list)
输入：信号链表指针list
输出：无
步骤：
1. 如果链表大小小于3，直接返回
2. 从第二个节点开始遍历到倒数第二个节点
3. 对每个节点，获取其前驱和后继节点
4. 对三维坐标分别进行均值计算：
   - 令当前节点的x = (前驱x + 当前x + 后继x)/3
   - 令当前节点的y = (前驱y + 当前y + 后继y)/3
   - 令当前节点的z = (前驱z + 当前z + 后继z)/3
5. 移动到下一个节点
```

### 2. 上采样算法(upsample)
```
算法：upsample(list)
输入：信号链表指针list
输出：无
步骤：
1. 从第一个实际节点开始遍历
2. 对每个节点，只要当前节点和下一个节点都不是虚拟尾节点：
   - 获取下一个节点next
   - 在当前节点和下一个节点之间插入一个新节点，其坐标为两节点坐标的平均值
   - 移动到next节点继续处理
```

### 3. 下采样算法(downsample)
```
算法：downsample(list)
输入：信号链表指针list
输出：无
步骤：
1. 初始化计数器count为0
2. 从第一个实际节点开始遍历
3. 对每个节点，记录下一个节点为next
4. 如果count为奇数：
   - 删除当前节点（调整前后节点的链接关系）
   - 释放当前节点内存
   - 链表大小减1
5. 计数器count加1
6. 移动到next节点继续处理
```

## 四、文件操作算法

### 1. 从文件加载数据算法(loadFromFile)
```
算法：loadFromFile(list, filename)
输入：链表指针list，文件名filename
输出：布尔值表示成功与否
步骤：
1. 打开文件，如果失败返回false
2. 清空当前链表
3. 循环读取文件每一行：
   - 如果匹配到节点索引，继续读取该节点的x,y,z坐标
   - 将读取到的坐标插入到链表末尾
4. 关闭文件并返回true
```

### 2. 保存数据到文件算法(saveToFile)
```
算法：saveToFile(list, filename)
输入：链表指针list，文件名filename
输出：布尔值表示成功与否
步骤：
1. 创建文件，如果失败返回false
2. 初始化索引index为1
3. 从第一个实际节点开始遍历
4. 对每个节点，将索引和坐标写入文件
5. 索引递增
6. 关闭文件并返回true
```

## 五、主程序流程

```
1. 创建并初始化信号链表
2. 从data.txt文件加载原始信号数据
3. 若加载成功，执行以下处理：
   a. 打印原始信号
   b. 对信号进行均值滤波处理
   c. 打印滤波后的信号并保存到filtered_signal.txt
   d. 对信号进行上采样处理
   e. 打印上采样后的信号并保存到upsampled_signal.txt
   f. 对信号进行下采样处理
   g. 打印下采样后的信号并保存到downsampled_signal.txt
4. 在信号的位置3插入一个新节点(1.0, 2.0, 3.0)
5. 打印插入新节点后的信号并检查是否为空
6. 清空信号列表
7. 打印清空后的信号并检查是否为空
8. 释放虚拟头尾节点内存
9. 程序结束
```

## 六、系统功能总结

1. 基本链表操作：初始化、插入、删除
2. 信号处理功能：均值滤波、上采样、下采样
3. 文件操作：读取信号、保存信号
4. 可视化：打印信号数据 